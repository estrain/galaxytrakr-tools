<tool id="lissero" name="lissero" version="1.0.1+galaxy2" python_template_version="3.5" profile="21.05">
  <requirements>
    <requirement type="package">lissero</requirement>
    <requirement type="package">setuptools</requirement>
  </requirements>
    <command detect_errors="exit_code"><![CDATA[
        lissero 
        #if $settings.advanced == "advanced"
          --min_id $settings.min_id
          --min_cov $settings.min_cov
        #end if
        '$input1' > output1;
        python $__tool_directory__/variant4b.py output1 output2.txt ${input1.element_identifier};   
    ]]></command>
    <inputs>
        <param type="data" name="input1" format="fasta" />
        <conditional name="settings">
            <param name="advanced" type="select" label="Specify advanced parameters">
                <option value="simple" selected="true">No, use program defaults.</option>
                <option value="advanced">Yes, see full parameter list.</option>
            </param>
            <when value="simple">
            </when>
            <when value="advanced">
                <param name="min_id" type="float" label="Minimum percent identity to accept a match" value="95.0" min="0" max="100" /> 
                <param name="min_cov" type="float" label="Minimum coverage of a gene to accept a match" value="95.0" min="0" max="100" /> 
            </when>
        </conditional>
    </inputs>
    <outputs>
      <data format="tabular" name="lissero.tsv" label="${tool.name} on ${on_string}: LisSero" from_work_dir="*.txt"/>
    </outputs>
    <help><![CDATA[
        Usage: lissero [OPTIONS] FASTA...

  In silico serogroup prediction for L. monocytogenes. Alleles: lmo1118,
  lmo0737, ORF2819, ORF2110, Prs

  References:

  Doumith et al. Differentiation of the major Listeria monocytogenes
  serovars by multiplex PCR. J Clin Microbiol, 2004; 42:8; 3819-22

Options:
  -h, --help              Show this message and exit.
  --min_id FLOAT          Minimum percent identity to accept a match. [0-100][default=95.0]
  --min_cov FLOAT         Minimum coverage of the gene to accept a match. [0-100][default=95.0]

    ]]></help>
    <citations>
      <citation type="doi">10.1128/JCM.42.8.3819-3822.2004</citation> 
    </citations>
</tool>
